<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Dreadheim â€¢ Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;800;900&display=swap" rel="stylesheet">

<style>
  html, body{ margin:0; padding:0; width:100%; height:100%; background:#000; overflow:hidden; font-family:Cinzel, serif; }
  #mapWrap{
    position:fixed; inset:0;
    background:url("/guildbook/scenes/maps/dreadheim.png") center center / cover no-repeat;
  }
  .poi{
    position:absolute;
    padding:10px 14px;
    border-radius:14px;
    font-weight:900;
    letter-spacing:.08em;
    text-transform:uppercase;
    cursor:pointer;
    user-select:none;
    border:1px solid rgba(255,210,120,0.35);
    background:linear-gradient(180deg, rgba(30,14,10,0.78), rgba(10,6,6,0.70));
    box-shadow:0 18px 55px rgba(0,0,0,0.55);
    color:rgba(255,225,170,.95);
  }
  .locked{ opacity:.28; cursor:not-allowed; filter:grayscale(1); }
</style>
</head>

<body>
<div id="mapWrap">

  <!-- MOVE ME: change left/top. Add more of these anytime. -->
  <div class="poi" data-href="/guildbook/scenes/dreadheim_meadhall.html"
       style="left:10%; top:12%;">Mead Hall</div>

  <!-- Example locked POI (requires flag). MOVE ME. -->
  <div class="poi locked" data-req-flag="dreadheim_dock_open" data-href="/guildbook/scenes/dreadheim_dock.html"
       style="left:10%; top:22%;">Dock</div>

  <!-- Back button word. MOVE ME. -->
  <div class="poi" data-href="/guildbook/scenes/maps/veriador_map.html"
       style="left:10%; top:32%;">Back</div>

</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const FLAGS_KEY = "va_flags";

  function getFlags(){
    try { return JSON.parse(localStorage.getItem(FLAGS_KEY) || "{}"); }
    catch { return {}; }
  }

  const flags = getFlags();

  document.querySelectorAll(".poi").forEach(el => {
    const req = el.getAttribute("data-req-flag");
    const href = el.getAttribute("data-href");
    const ok = !req || flags[req] === true;

    if (!ok){
      el.classList.add("locked");
      el.onclick = () => {};
      el.title = "Locked";
    } else {
      el.classList.remove("locked");
      el.onclick = () => { if (href) window.location.href = href; };
      el.title = "Open";
    }
  });
});
</script>
</body>
</html>
