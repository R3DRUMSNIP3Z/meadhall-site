{
  "version": 1,
  "variables": {
    "race": null,
    "wizard_signed": false,
    "witch_met": false,
    "ph1_done": false,
    "ph2_done": false,
    "ph3_done": false,
    "ph4_done": false,
    "ph5_done": false,
    "ph6_done": false,
    "ph7_done": false,
    "ph8_done": false,
    "ph9_done": false,
    "ph10_done": false
  },

  "rules": [
    {
      "id": "q_main_pick_race",
      "unlockIf": "true",
      "autoActivateIf": "!race",
      "completeIf": "!!race"
    },
    {
      "id": "q_travel_home",
      "unlockIf": "!!race",
      "autoActivateIf": "!!race && !wizard_signed",
      "completeIf": "false",
      "next": "q_find_dreadheim_wizard"
    },
    {
      "id": "q_find_dreadheim_wizard",
      "unlockIf": "race == 'dreadheim'",
      "autoActivateIf": "race == 'dreadheim' && !wizard_signed",
      "completeIf": "wizard_signed",
      "next": "q_find_dreadheim_witch"
    },
    {
      "id": "q_find_dreadheim_witch",
      "unlockIf": "wizard_signed",
      "autoActivateIf": "wizard_signed && !witch_met",
      "completeIf": "witch_met"
    },

    {
      "id": "q_placeholder_01",
      "unlockIf": "wizard_signed",
      "autoActivateIf": "wizard_signed && !ph1_done",
      "completeIf": "ph1_done"
    },
    {
      "id": "q_placeholder_02",
      "unlockIf": "ph1_done",
      "autoActivateIf": "ph1_done && !ph2_done",
      "completeIf": "ph2_done"
    },
    {
      "id": "q_placeholder_03",
      "unlockIf": "ph2_done",
      "autoActivateIf": "ph2_done && !ph3_done",
      "completeIf": "ph3_done"
    },
    {
      "id": "q_placeholder_04",
      "unlockIf": "ph3_done",
      "autoActivateIf": "ph3_done && !ph4_done",
      "completeIf": "ph4_done"
    },
    {
      "id": "q_placeholder_05",
      "unlockIf": "ph4_done",
      "autoActivateIf": "ph4_done && !ph5_done",
      "completeIf": "ph5_done"
    },
    {
      "id": "q_placeholder_06",
      "unlockIf": "ph5_done",
      "autoActivateIf": "ph5_done && !ph6_done",
      "completeIf": "ph6_done"
    },
    {
      "id": "q_placeholder_07",
      "unlockIf": "ph6_done",
      "autoActivateIf": "ph6_done && !ph7_done",
      "completeIf": "ph7_done"
    },
    {
      "id": "q_placeholder_08",
      "unlockIf": "ph7_done",
      "autoActivateIf": "ph7_done && !ph8_done",
      "completeIf": "ph8_done"
    },
    {
      "id": "q_placeholder_09",
      "unlockIf": "ph8_done",
      "autoActivateIf": "ph8_done && !ph9_done",
      "completeIf": "ph9_done"
    },
    {
      "id": "q_placeholder_10",
      "unlockIf": "ph9_done",
      "autoActivateIf": "ph9_done && !ph10_done",
      "completeIf": "ph10_done"
    }
  ],

  "quests": [
    {
      "id": "q_main_pick_race",
      "title": "Choose Your Path",
      "desc": "Pick your homeland.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "Elder",
          "text": "You stand at the fork of fates. Choose your homeland.",
          "choices": [
            { "text": "Dreadheim.", "next": "dreadheimAsk" },
            { "text": "I'll decide later.", "next": "end" }
          ]
        },
        {
          "id": "dreadheimAsk",
          "speaker": "Elder",
          "text": "Dreadheim? Cold iron and darker oaths. Is that your path?",
          "choices": [
            { "text": "Yes—Dreadheim.", "next": "dreadheimChosen" },
            { "text": "Tell me more first.", "next": "explain" }
          ]
        },
        {
          "id": "explain",
          "speaker": "Elder",
          "text": "Each homeland shapes you. Dreadheim hardens the will; others test the heart.",
          "choices": [
            { "text": "I choose Dreadheim.", "next": "dreadheimChosen" },
            { "text": "I'll decide later.", "next": "end" }
          ]
        },
        {
          "id": "dreadheimChosen",
          "speaker": "Elder",
          "text": "So be it. Return to your homeland and prove yourself.",
          "action": {
            "type": "setVars",
            "set": { "race": "dreadheim" }
          },
          "next": "end"
        },
        {
          "id": "end",
          "text": "Your choice echoes in the halls of memory."
        }
      ]
    },

    {
      "id": "q_travel_home",
      "title": "Travel to Dreadheim",
      "desc": "Return to your homeland.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "Guard Captain",
          "text": "Ready to depart for Dreadheim?",
          "choices": [
            { "text": "I'm ready.", "next": "confirm" },
            { "text": "Not yet.", "next": "end" }
          ]
        },
        {
          "id": "confirm",
          "speaker": "Guard Captain",
          "text": "Then go with a sharp blade and a steady hand.",
          "next": "end"
        },
        {
          "id": "end",
          "text": "The road waits. (Use the Travel button to depart.)"
        }
      ]
    },

    {
      "id": "q_find_dreadheim_wizard",
      "title": "Find the Dreadheim Wizard",
      "desc": "They say he waits in a lamplit hall.",
      "rewards": {
        "gold": 100,
        "brisingr": 1,
        "items": [
          {
            "id": "wizardscroll",
            "name": "Lamplit Clue",
            "image": "/guildbook/loot/questscroll.png",
            "qty": 1
          }
        ]
      },
      "dialogue": [
        {
          "id": "start",
          "speaker": "Wizard",
          "text": "So you found me at last, child of Dreadheim.",
          "choices": [
            { "text": "Who are you?", "next": "intro1" },
            { "text": "What do you want?", "next": "warn1" }
          ]
        },
        {
          "id": "intro1",
          "speaker": "Wizard",
          "text": "I am the seer in the smoke, the hand that points at storms.",
          "choices": [
            { "text": "Then guide me.", "next": "guide" },
            { "text": "Why should I trust you?", "next": "warn1" }
          ]
        },
        {
          "id": "warn1",
          "speaker": "Wizard",
          "text": "Shadows stir in the north; wolves wear men’s faces.",
          "choices": [
            { "text": "What must I do?", "next": "guide" },
            { "text": "I fear nothing.", "next": "taunt" }
          ]
        },
        {
          "id": "taunt",
          "speaker": "Wizard",
          "text": "Fear is a mask. Remove it and face the truth—or die with it on.",
          "next": "guide"
        },
        {
          "id": "guide",
          "speaker": "Wizard",
          "text": "Go to the Dreadheim Outskirts. Seek Skarthra the Pale. She will test your worth.",
          "choices": [
            { "text": "I'll find her.", "next": "complete" }
          ]
        },
        {
          "id": "complete",
          "text": "The wizard’s eyes fade to embers. A parchment sigil burns in your hand.",
          "action": {
            "type": "completeQuest",
            "showParchmentSignature": true,
            "setVars": { "wizard_signed": true }
          }
        }
      ]
    },

    {
      "id": "q_find_dreadheim_witch",
      "title": "Find Skarthra the Pale",
      "desc": "She haunts the Dreadheim Outskirts.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "Skarthra",
          "text": "So the wizard sent you. Let's see if your courage isn't borrowed."
        }
      ]
    },

    {
      "id": "q_placeholder_01",
      "title": "Placeholder Quest 01",
      "desc": "Temporary quest slot for future content.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "NPC",
          "text": "Placeholder quest 01. Replace me later.",
          "choices": [
            { "text": "Complete.", "next": "done" },
            { "text": "Not yet.", "next": "end" }
          ]
        },
        {
          "id": "done",
          "text": "Marked complete.",
          "action": { "type": "setVars", "set": { "ph1_done": true } }
        },
        {
          "id": "end",
          "text": "Come back anytime."
        }
      ]
    },

    {
      "id": "q_placeholder_02",
      "title": "Placeholder Quest 02",
      "desc": "Temporary quest slot.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "NPC",
          "text": "Placeholder quest 02.",
          "choices": [
            { "text": "OK.", "next": "done" }
          ]
        },
        {
          "id": "done",
          "text": "Marked complete.",
          "action": { "type": "setVars", "set": { "ph2_done": true } }
        }
      ]
    },

    {
      "id": "q_placeholder_03",
      "title": "Placeholder Quest 03",
      "desc": "Temporary quest slot.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "NPC",
          "text": "Placeholder quest 03.",
          "choices": [
            { "text": "OK.", "next": "done" }
          ]
        },
        {
          "id": "done",
          "text": "Marked complete.",
          "action": { "type": "setVars", "set": { "ph3_done": true } }
        }
      ]
    },

    {
      "id": "q_placeholder_04",
      "title": "Placeholder Quest 04",
      "desc": "Temporary quest slot.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "NPC",
          "text": "Placeholder quest 04.",
          "choices": [
            { "text": "OK.", "next": "done" }
          ]
        },
        {
          "id": "done",
          "text": "Marked complete.",
          "action": { "type": "setVars", "set": { "ph4_done": true } }
        }
      ]
    },

    {
      "id": "q_placeholder_05",
      "title": "Placeholder Quest 05",
      "desc": "Temporary quest slot.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "NPC",
          "text": "Placeholder quest 05.",
          "choices": [
            { "text": "OK.", "next": "done" }
          ]
        },
        {
          "id": "done",
          "text": "Marked complete.",
          "action": { "type": "setVars", "set": { "ph5_done": true } }
        }
      ]
    },

    {
      "id": "q_placeholder_06",
      "title": "Placeholder Quest 06",
      "desc": "Temporary quest slot.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "NPC",
          "text": "Placeholder quest 06.",
          "choices": [
            { "text": "OK.", "next": "done" }
          ]
        },
        {
          "id": "done",
          "text": "Marked complete.",
          "action": { "type": "setVars", "set": { "ph6_done": true } }
        }
      ]
    },

    {
      "id": "q_placeholder_07",
      "title": "Placeholder Quest 07",
      "desc": "Temporary quest slot.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "NPC",
          "text": "Placeholder quest 07.",
          "choices": [
            { "text": "OK.", "next": "done" }
          ]
        },
        {
          "id": "done",
          "text": "Marked complete.",
          "action": { "type": "setVars", "set": { "ph7_done": true } }
        }
      ]
    },

    {
      "id": "q_placeholder_08",
      "title": "Placeholder Quest 08",
      "desc": "Temporary quest slot.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "NPC",
          "text": "Placeholder quest 08.",
          "choices": [
            { "text": "OK.", "next": "done" }
          ]
        },
        {
          "id": "done",
          "text": "Marked complete.",
          "action": { "type": "setVars", "set": { "ph8_done": true } }
        }
      ]
    },

    {
      "id": "q_placeholder_09",
      "title": "Placeholder Quest 09",
      "desc": "Temporary quest slot.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "NPC",
          "text": "Placeholder quest 09.",
          "choices": [
            { "text": "OK.", "next": "done" }
          ]
        },
        {
          "id": "done",
          "text": "Marked complete.",
          "action": { "type": "setVars", "set": { "ph9_done": true } }
        }
      ]
    },

    {
      "id": "q_placeholder_10",
      "title": "Placeholder Quest 10",
      "desc": "Temporary quest slot.",
      "dialogue": [
        {
          "id": "start",
          "speaker": "NPC",
          "text": "Placeholder quest 10.",
          "choices": [
            { "text": "OK.", "next": "done" }
          ]
        },
        {
          "id": "done",
          "text": "Marked complete.",
          "action": { "type": "setVars", "set": { "ph10_done": true } }
        }
      ]
    }

  ]
}






